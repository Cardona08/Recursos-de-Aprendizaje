<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Docentes - Cecytem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e8ba3 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        header h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            color: #2a5298;
            font-size: 1.2em;
            font-weight: 500;
        }

        .subtitle strong {
            color: #1e3c72;
            font-weight: 700;
        }

        .logout-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95em;
            letter-spacing: 0.5px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .logout-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        .logout-btn svg {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        .logout-btn:hover svg {
            transform: translateX(3px);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 40px 30px;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .icon-container {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-container svg {
            width: 100%;
            height: 100%;
            transition: all 0.3s ease;
        }

        .card:hover .icon-container {
            transform: scale(1.1) rotate(5deg);
        }

        .card-title {
            color: #1e3c72;
            font-size: 1.8em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .card-description {
            color: #666;
            font-size: 1em;
            line-height: 1.6;
        }

        /* Colores específicos por card */
        .buscar-alumnos { border-top: 5px solid #667eea; }
        .buscar-alumnos:hover { background: linear-gradient(135deg, #f5f7ff 0%, #e8ebff 100%); }
        .buscar-alumnos .icon-container svg { fill: #667eea; }

        .empleados { border-top: 5px solid #f093fb; }
        .empleados:hover { background: linear-gradient(135deg, #fff5fd 0%, #ffe8f7 100%); }
        .empleados .icon-container svg { fill: #f093fb; }

        .cambios-materias { border-top: 5px solid #4facfe; }
        .cambios-materias:hover { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); }
        .cambios-materias .icon-container svg { fill: #4facfe; }

        .agregar-avisos { border-top: 5px solid #fa709a; }
        .agregar-avisos:hover { background: linear-gradient(135deg, #fff0f5 0%, #ffe4ec 100%); }
        .agregar-avisos .icon-container svg { fill: #fa709a; }

        .subir-recursos { border-top: 5px solid #30cfd0; }
        .subir-recursos:hover { background: linear-gradient(135deg, #f0fffe 0%, #e0fffd 100%); }
        .subir-recursos .icon-container svg { fill: #30cfd0; }

        .ayuda { border-top: 5px solid #a8edea; }
        .ayuda:hover { background: linear-gradient(135deg, #f7fffe 0%, #edfffe 100%); }
        .ayuda .icon-container svg { fill: #a8edea; }

        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2em;
            }

            .logout-btn {
                position: static;
                display: inline-flex;
                margin-top: 15px;
            }
        }

        /* Animación de entrada */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.6s ease forwards;
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }
        .card:nth-child(6) { animation-delay: 0.6s; }
    </style>
    
    <script>
        const INACTIVIDAD_TIEMPO = 5 * 60 * 1000; // 5 minutos
        let temporizadorInactividad;

        function cerrarSesion() {
            alert("Se ha cerrado la sesión por inactividad.");
            window.location.href = "/logout";
        }

        function reiniciarTemporizador() {
            clearTimeout(temporizadorInactividad);
            temporizadorInactividad = setTimeout(cerrarSesion, INACTIVIDAD_TIEMPO);
        }

        function iniciarDeteccionInactividad() {
            ["mousemove", "keypress", "click", "scroll"].forEach(evento => {
                document.addEventListener(evento, reiniciarTemporizador);
            });
            reiniciarTemporizador();
        }

        window.onload = iniciarDeteccionInactividad;
    </script>
</head>
<body>
    <a href="/logout" class="logout-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white">
            <path d="M16 17v-3H9v-4h7V7l5 5-5 5M14 2a2 2 0 012 2v2h-2V4H5v16h9v-2h2v2a2 2 0 01-2 2H5a2 2 0 01-2-2V4a2 2 0 012-2h9z"/>
        </svg>
        Cerrar Sesión
    </a>
    
    <div class="container">
        <header>
            <h1>Portal Educativo - Empleados</h1>
            <p class="subtitle">Bienvenido/a: <strong>{{ session.user_name }}</strong></p>
        </header>

        <div class="grid">
            <!-- 1. BUSCAR ALUMNOS -->
            <a href="{{ url_for('grupos') }}" class="card buscar-alumnos">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.39 3.39 0 0 0-1.93.59 5 5 0 0 1 0 5.82A3.39 3.39 0 0 0 15 11a3.5 3.5 0 0 0 0-7z"/>
                    </svg>
                </div>
                <h2 class="card-title">Buscar Alumnos</h2>
                <p class="card-description">Consultar expedientes, calificaciones y datos de estudiantes por grupo</p>
            </a>

            <!-- 2. EMPLEADOS -->
            <a href="{{ url_for('docentes') }}" class="card empleados">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4z"/>
                        <circle cx="18.5" cy="8.5" r="2.5"/>
                        <path d="M18.5 11c-1.33 0-2.42.67-3.08 1.68.7.46 1.28 1 1.73 1.6.5-.32 1.1-.53 1.85-.53 1.95 0 3.5.88 3.5 2v1.5h2V16c0-1.66-2.69-3-5-3z"/>
                    </svg>
                </div>
                <h2 class="card-title">Empleados</h2>
                <p class="card-description">Directorio completo del personal docente, orientadores y directivos</p>
            </a>

            <!-- 3. CAMBIOS EN MATERIAS -->
            <a href="{{ url_for('materias') }}" class="card cambios-materias">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M19 1L14 6V17L19 12.5V1M21 5V18.5C19.9 18.15 18.7 18 17.5 18C15.8 18 13.35 18.65 12 19.5V6C10.55 4.9 8.45 4.5 6.5 4.5C4.55 4.5 2.45 4.9 1 6V20.65C1 20.9 1.25 21.15 1.5 21.15C1.6 21.15 1.65 21.1 1.75 21.1C3.1 20.45 5.05 20 6.5 20C8.45 20 10.55 20.4 12 21.5C13.35 20.65 15.8 20 17.5 20C19.15 20 20.85 20.3 22.25 21.05C22.35 21.1 22.4 21.1 22.5 21.1C22.75 21.1 23 20.85 23 20.6V6C22.4 5.55 21.75 5.25 21 5M10 18.41C8.75 18.09 7.5 18 6.5 18C5.44 18 4.18 18.19 3 18.5V7.13C3.91 6.73 5.14 6.5 6.5 6.5C7.86 6.5 9.09 6.73 10 7.13V18.41Z"/>
                    </svg>
                </div>
                <h2 class="card-title">Cambios en Materias</h2>
                <p class="card-description">Actualizar programas de estudio, contenidos y modificaciones curriculares</p>
            </a>

            <!-- 4. AGREGAR AVISOS - ✅ CORREGIDO -->
            <a href="{{ url_for('agregar_aviso_form') }}" class="card agregar-avisos">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
                        <circle cx="19" cy="6" r="3" fill="#ff4444"/>
                    </svg>
                </div>
                <h2 class="card-title">Agregar Avisos</h2>
                <p class="card-description">Publicar comunicados, circulares e información importante para el plantel</p>
            </a>

            <!-- 5. SUBIR RECURSOS DE APRENDIZAJE -->
            <a href="#" onclick="subirRecursos(); return false;" class="card subir-recursos">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M9 16v-6H5l7-7 7 7h-4v6H9m-4 4h14v2H5v-2z"/>
                    </svg>
                </div>
                <h2 class="card-title">Subir Recursos de Aprendizaje</h2>
                <p class="card-description">Compartir materiales didácticos, presentaciones y documentos educativos</p>
            </a>

            <!-- 6. AYUDA -->
            <a href="{{ url_for('ayuda') }}" class="card ayuda">
                <div class="icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M11 18h2v-2h-2v2m1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                    </svg>
                </div>
                <h2 class="card-title">Ayuda</h2>
                <p class="card-description">Centro de soporte técnico, manuales y asistencia para el portal</p>
            </a>
        </div>
    </div>

    <script>
        function subirRecursos() {
            alert('Funcionalidad de subir recursos en desarrollo...');
        }
    </script>
</body>
</html>